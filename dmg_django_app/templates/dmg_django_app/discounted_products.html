{% extends "dmg_django_app/base.html" %}

{% load static %}

{% block content %}
<div class="results-container text-black" style="min-height:750px">
{% if supermarkets.keys %}
    {% for supermarket, products in supermarkets.items %}
    <div class="supermarket-heading text-center">
        <h2>{{ supermarket }}</h2>
    </div>
    <div class="discounted-products-wrapper table-responsive">
        <table class="table-sm discounted-products mx-auto">
            <thead>
                <tr>
                    <th class="product-image"></th>
                    <th class="product-title"></th>
                    <th class="product-price"></th>
                </tr>
            </thead>
            <tbody>
                {% for title, data in products.items %}
                <tr class="product-list">
                    <td>
                        <div class="product-image-wrapper border border dark" style="width:80px;height:80px;">
                            <img class="product-image" src="data:image/png;base64, {{ data.image }}" style="width:80px;height:80px;">
                        </div>
                    </td>
                    <td> 
                        <div class="product-title text-center overflow-auto" style="height:80px;">{{ title }}</div>
                    </td>
                    <td>
                        <div class="product-price text-center" style="height:80px;"">
                            <strong>{{ data.price }}</strong>
                            {% if data.promo %}
                            <p>{{ data.promo }}</p>
                            {% endif %}
                        </div>
                    </td>
                </tr>    
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endfor %}
{% elif not supermarkets.keys %}
    <div class="response-text p-5">
        <div style="height:100vh">
            <h1>No matching items found.</h1>
        </div>
    </div>
{% endif %}
</div>

{% endblock %}